<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Formulário de Viagem ASAPH</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>Registro de Viagens</h1>
        <p>ASAPH - Soluções em Tecnologia</p>
    </div>
    
    <div class="form-container">
        <form id="formViagem">
            <div class="form-group">
                <label for="nome" class="required-field">NOME<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Selecione seu nome na lista</span></span></label>
                <select id="nome" name="nome" required>
                    <option value="">Selecione seu nome</option>
                    <option value="André">André</option>
                    <option value="Cássio">Cássio</option>
                    <option value="Danilo">Danilo</option>
                    <option value="Fernando">Fernando</option>
                    <option value="Giuseppe">Giuseppe</option>
                    <option value="Guilherme Trindade">Guilherme Trindade</option>
                    <option value="Leandro">Leandro</option>
                    <option value="Leonardo Langella">Leonardo Langella</option>
                    <option value="Luiz Felipe">Luiz Felipe</option>
                    <option value="Marco Faria">Marco Faria</option>
                    <option value="Marcos DJ">Marcos DJ</option>
                    <option value="Rafael Carvalho">Rafael Carvalho</option>
                    <option value="Roberto">Roberto</option>
                    <option value="Thiago Dantas">Thiago Dantas</option>
                    <option value="Thiago Tortolano">Thiago Tortolano</option>
                    <option value="Wagner">Wagner</option>
                    <option value="Yuri">Yuri</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="carro" class="required-field">CARRO<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Selecione o veículo utilizado</span></span></label>
                <select id="carro" name="carro" required>
                    <option value="">Selecione o carro</option>
                    <option value="BYD 63">BYD 63</option>
                    <option value="BYD 04">BYD 04</option>
                    <option value="Carens">Carens</option>
                    <option value="Doblo-41">Doblo-41</option>
                    <option value="Doblo-98">Doblo-98</option>
                    <option value="Caminhão">Caminhão</option>
                    <option value="Particular">Particular</option>
                    <option value="Sandero">Sandero</option>
                    <option value="Saveiro">Saveiro</option>
                    <option value="Spin">Spin</option>
                </select>
            </div>
            
            <div class="form-group hidden" id="modelo-group">
                <label for="modelo">MODELO<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Modelo do caminhão</span></span></label>
                <select id="modelo" name="modelo">
                    <option value="">Selecione o modelo</option>
                    <option value="IVECO - DELIVERY-19">IVECO - DELIVERY-19</option>
                    <option value="IVECO - DELIVERY-57">IVECO - DELIVERY-57</option>
                    <option value="IVECO - DELIVERY-83">IVECO - DELIVERY-83</option>
                    <option value="IVECO - DELIVERY-35">IVECO - DELIVERY-35</option>
                    <option value="VUC-12">VUC-12</option>
                    <option value="VUC-69">VUC-69</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="placa">PLACA<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Placa do veículo (preenchimento automático)</span></span></label>
                <select id="placa" name="placa">
                    <option value="">Selecione a placa</option>
                    <option value="EMR4C04">EMR4C04 (Sandero)</option>
                    <option value="FKE9857">FKE9857 (Spin)</option>
                    <option value="TLB5B63">TLB5B63 (BYD 63)</option>
                    <option value="TLF1C04">TLF1C04 (BYD 04)</option>
                    <option value="RNM2A41">RNM2A41 (Doblo-41)</option>
                    <option value="RNZ9E98">RNZ9E98 (Doblo-98)</option>
                    <option value="GBK4A85">GBK4A85 (Saveiro)</option>
                    <option value="ENJ2154">ENJ2154 (Carens)</option>
                    <option value="TJY1I19">TJY1I19 (IVECO - DELIVERY-19)</option>
                    <option value="TJQ5E57">TJQ5E57 (IVECO - DELIVERY-57)</option>
                    <option value="TJV1H83">TJV1H83 (IVECO - DELIVERY-83)</option>
                    <option value="TJV1C35">TJV1C35 (IVECO - DELIVERY-35)</option>
                    <option value="GIT4J12">GIT4J12 (VUC-12)</option>
                    <option value="DYJ5A69">DYJ5A69 (VUC-69)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="rodizio">RODÍZIO VEÍCULAR<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Rodízio municipal de veículos de São Paulo (não se aplica a veículos elétricos)</span></span></label>
                <select id="rodizio" name="rodizio" disabled>
                    <option value="">Selecione a placa primeiro</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="destino" class="required-field">DESTINO<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Local de destino da viagem</span></span></label>
                <select id="destino" name="destino" required>
                    <option value="">Selecione o destino</option>
                    <option value="Atenas">Atenas</option>
                    <option value="ASAPH">ASAPH</option>
                    <option value="Distrito-Anhembi">Distrito Anhembi</option>
                    <option value="Expo-Center-Norte">Expo-Center Norte</option>
                    <option value="Pro Magno">Pro Magno</option>
                    <option value="SP-EXPO">SP-EXPO</option>
                    <option value="TRANSAMERICA">TRANSAMERICA</option>
                    <option value="Outro">Outro</option>
                </select>
                <input type="text" id="outroDestino" name="outroDestino" placeholder="Especifique outro destino" style="display: none; margin-top: 10px;">
                <input type="text" id="nomeEvento" name="nomeEvento" placeholder="Nome do evento" style="display: none; margin-top: 10px;">
            </div>
            
            <div class="form-group">
                <label for="km" class="required-field">KM<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Quilometragem do veículo</span></span></label>
                <input type="number" id="km" name="km" step="0.01" required placeholder="Ex: 123.45">
            </div>
            
            <div class="form-group">
                <label for="pneu" class="required-field">PNEU<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Estado dos pneus do veículo</span></span></label>
                <select id="pneu" name="pneu" required>
                    <option value="">Selecione...</option>
                    <option value="Cheio">Cheio</option>
                    <option value="Vazio">Vazio</option>
                    <option value="Atenção necessária">Atenção necessária</option>
                </select>
                <input type="text" id="obsPneu" name="obsPneu" placeholder="Descreva a observação sobre o pneu" style="display: none; margin-top: 10px;">
            </div>
            
            <div class="form-group hidden" id="combustivel-group">
                <label for="combustivel" class="required-field">COMBUSTÍVEL<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Nível do tanque de combustível</span></span></label>
                <select id="combustivel" name="combustivel">
                    <option value="">Selecione...</option>
                    <option value="4/4">4/4 (Tanque cheio)</option>
                    <option value="3/4">3/4</option>
                    <option value="2/4">2/4 (Meio tanque)</option>
                    <option value="1/4">1/4</option>
                </select>
            </div>
            
            <div class="form-group" id="bateria-group">
                <label for="bateria" class="required-field">NÍVEL DA BATERIA<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Nível de carga da bateria (veículos elétricos)</span></span></label>
                <div class="battery-container">
                    <div id="batteryFill">100%</div>
                    <input type="range" id="bateria" name="bateria" min="1" max="100" value="100" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="cartao" class="required-field">CARTÃO<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Cartão utilizado para pedágios/combustível</span></span></label>
                <select id="cartao" name="cartao" required>
                    <option value="">Selecione...</option>
                    <option value="6530">6530</option>
                    <option value="9405">9405</option>
                    <option value="Nenhum">Nenhum</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="higiene" class="required-field">HIGIENE<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Estado de limpeza do veículo</span></span></label>
                <select id="higiene" name="higiene" required>
                    <option value="">Selecione...</option>
                    <option value="Limpo">Limpo</option>
                    <option value="Mais ou menos">Mais ou menos</option>
                    <option value="Sujo">Sujo</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="carrinho">CARRINHO<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Carrinho de transporte utilizado</span></span></label>
                <input type="text" id="carrinho" name="carrinho" placeholder="Ex: Carrinho preto grande">
            </div>
            
            <div class="form-group">
                <label for="data" class="required-field">DATA<span class="tooltip"><span class="tooltip-icon">?</span><span class="tooltip-text">Data da viagem (preenchimento automático)</span></span></label>
                <input type="date" id="data" name="data" required disabled>
            </div>
            
            <div class="form-group">
                <button type="submit" class="submit-btn">SALVAR REGISTRO</button>
            </div>
        </form>
        
        <div id="resultadoContainer" style="display: none;">
            <div id="resultado" class="resultado"></div>
            <button id="copyBtn" class="copy-btn">COPIAR MENSAGEM</button>
        </div>
    </div>
    
    <div class="footer">
        <p><strong>ASAPH</strong> - Soluções em Tecnologia</p>
        <p>11 3596-8900 | comercial@asaph.info</p>
        <p>Para sua marca brilhar</p>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configura data atual
            const today = new Date();
            const todayFormatted = today.toISOString().split('T')[0];
            document.getElementById('data').value = todayFormatted;
            
            // Foco no primeiro campo
            document.getElementById('nome').focus();
            
            // Ajuste para mobile
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                document.querySelectorAll('select').forEach(select => {
                    select.style.fontSize = '16px';
                });
            }
            
            // Mostrar/ocultar campos conforme seleções
            document.getElementById('destino').addEventListener('change', function() {
                const outroDestinoField = document.getElementById('outroDestino');
                const nomeEventoField = document.getElementById('nomeEvento');
                outroDestinoField.style.display = this.value === 'Outro' ? 'block' : 'none';
                nomeEventoField.style.display = this.value ? 'block' : 'none';
                if (this.value !== 'Outro') outroDestinoField.value = '';
            });
            
            document.getElementById('carro').addEventListener('change', function() {
                const carroSelecionado = this.value;
                const placaSelect = document.getElementById('placa');
                
                // Mapeamento de carros para placas
                const mapeamentoPlacas = {
                    'Sandero': 'EMR4C04',
                    'Spin': 'FKE9857',
                    'BYD 63': 'TLB5B63',
                    'BYD 04': 'TLF1C04',
                    'BYD 08': '',
                    'Doblo-41': 'RNM2A41',
                    'Doblo-98': 'RNZ9E98',
                    'Saveiro': 'GBK4A85',
                    'Carens': 'ENJ2154',
                    'IVECO - DELIVERY-19': 'TJY1I19',
                    'IVECO - DELIVERY-57': 'TJQ5E57',
                    'IVECO - DELIVERY-83': 'TJV1H83',
                    'IVECO - DELIVERY-35': 'TJV1C35',
                    'VUC-12': 'GIT4J12',
                    'VUC-69': 'DYJ5A69'
                };
                
                if (mapeamentoPlacas[carroSelecionado]) {
                    placaSelect.value = mapeamentoPlacas[carroSelecionado];
                } else {
                    placaSelect.selectedIndex = 0;
                }
                
                // Mostrar/ocultar campos específicos
                const isBYD = carroSelecionado === 'BYD 63' || carroSelecionado === 'BYD 04' || carroSelecionado === 'BYD 08';
                document.getElementById('combustivel-group').classList.toggle('hidden', isBYD);
                document.getElementById('bateria-group').classList.toggle('hidden', !isBYD);
                
                const isCaminhao = carroSelecionado === 'Caminhão';
                document.getElementById('modelo-group').classList.toggle('hidden', !isCaminhao);
                if (!isCaminhao) document.getElementById('modelo').selectedIndex = 0;
                
                // Atualiza rodízio quando o carro muda
                atualizarRodizio();
            });
            
            document.getElementById('modelo').addEventListener('change', function() {
                const modeloSelecionado = this.value;
                const placaSelect = document.getElementById('placa');
                const mapeamentoModeloPlaca = {
                    'IVECO - DELIVERY-19': 'TJY1I19',
                    'IVECO - DELIVERY-57': 'TJQ5E57',
                    'IVECO - DELIVERY-83': 'TJV1H83',
                    'IVECO - DELIVERY-35': 'TJV1C35',
                    'VUC-12': 'GIT4J12',
                    'VUC-69': 'DYJ5A69'
                };
                
                if (mapeamentoModeloPlaca[modeloSelecionado]) {
                    placaSelect.value = mapeamentoModeloPlaca[modeloSelecionado];
                }
                
                // Atualiza rodízio quando o modelo muda
                atualizarRodizio();
            });
            
            document.getElementById('placa').addEventListener('change', function() {
                atualizarRodizio();
            });
            
            // Atualização do visualizador de bateria
            const batterySlider = document.getElementById('bateria');
            const batteryFill = document.getElementById('batteryFill');
            batterySlider.addEventListener('input', function() {
                const value = this.value;
                batteryFill.style.width = value + '%';
                batteryFill.textContent = value + '%';
                batteryFill.style.backgroundColor = getBatteryColor(value);
            });

            function getBatteryColor(percent) {
                // Cores intermediárias entre vermelho e verde
                const redStart = 255, greenStart = 102, blueStart = 102;  // #FF6666
                const redEnd = 102, greenEnd = 255, blueEnd = 102;        // #66FF66

                const p = percent / 100;
                const r = Math.round(redStart + (redEnd - redStart) * p);
                const g = Math.round(greenStart + (greenEnd - greenStart) * p);
                const b = Math.round(blueStart + (blueEnd - blueStart) * p);

                return `rgb(${r}, ${g}, ${b})`;
            }
            
            document.getElementById('pneu').addEventListener('change', function() {
                const obsPneuField = document.getElementById('obsPneu');
                obsPneuField.style.display = this.value === 'Atenção necessária' ? 'block' : 'none';
            });
            
            // Evento de submit
            document.getElementById('formViagem').addEventListener('submit', function(event) {
                event.preventDefault();
                
                const submitBtn = this.querySelector('.submit-btn');
                submitBtn.classList.add('loading');
                
                setTimeout(() => {
                    salvarRegistro();
                    submitBtn.classList.remove('loading');
                }, 500);
            });
            
            document.getElementById('copyBtn').addEventListener('click', copiarMensagem);
            
            // Função para atualizar o rodízio veicular
            function atualizarRodizio() {
                const carroSelecionado = document.getElementById('carro').value;
                const placaSelecionada = document.getElementById('placa').value;
                const rodizioSelect = document.getElementById('rodizio');
                
                // Limpa as opções existentes
                rodizioSelect.innerHTML = '';
                
                // Se for veículo elétrico (BYD), não aplica rodízio
                if (carroSelecionado.includes('BYD')) {
                    rodizioSelect.disabled = true;
                    const option = document.createElement('option');
                    option.value = 'Não se aplica';
                    option.textContent = 'Não se aplica (veículo elétrico)';
                    rodizioSelect.appendChild(option);
                    return;
                }
                
                // Se não houver placa selecionada
                if (!placaSelecionada) {
                    rodizioSelect.disabled = true;
                    const option = document.createElement('option');
                    option.value = '';
                    option.textContent = 'Selecione a placa primeiro';
                    rodizioSelect.appendChild(option);
                    return;
                }
                
                // Pega o último dígito da placa
                const ultimoDigito = placaSelecionada.charAt(placaSelecionada.length - 1);
                
                // Determina o dia do rodízio
                let diaRodizio = '';
                if (['1', '2'].includes(ultimoDigito)) {
                    diaRodizio = 'Segunda-feira';
                } else if (['3', '4'].includes(ultimoDigito)) {
                    diaRodizio = 'Terça-feira';
                } else if (['5', '6'].includes(ultimoDigito)) {
                    diaRodizio = 'Quarta-feira';
                } else if (['7', '8'].includes(ultimoDigito)) {
                    diaRodizio = 'Quinta-feira';
                } else if (['9', '0'].includes(ultimoDigito)) {
                    diaRodizio = 'Sexta-feira';
                }
                
                // Atualiza o select
                rodizioSelect.disabled = false;
                const option = document.createElement('option');
                option.value = diaRodizio;
                option.textContent = `Rodízio: ${diaRodizio} (Final ${ultimoDigito})`;
                rodizioSelect.appendChild(option);
            }
        });

        function salvarRegistro() {
            const form = document.getElementById('formViagem');
            
            // Obter valores
            const nome = form.nome.value;
            const carro = form.carro.value;
            const placa = form.placa.value || 'Não informado';
            const rodizio = form.rodizio.value || 'Não se aplica';
            const destino = form.destino.value === 'Outro' ? form.outroDestino.value : form.destino.value;
            const nomeEvento = form.nomeEvento.value || 'Não informado';
            const km = form.km.value;
            const pneu = form.pneu.value === 'Atenção necessária' ? 
                         `${form.pneu.value} (${form.obsPneu.value})` : form.pneu.value;
            
            const isBYD = carro.includes('BYD');
            const combustivelOuBateria = isBYD ? 
                `Bateria: ${form.bateria.value}%` : 
                `Combustível: ${form.combustivel.value || 'Não informado'}`;
            
            const cartao = form.cartao.value || 'Não informado';
            const higiene = form.higiene.value || 'Não informado';
            const carrinho = form.carrinho.value || 'Não informado';
            
            // Formatar data
            const dataParts = form.data.value.split('-');
            const dataFormatada = `${dataParts[2]}/${dataParts[1]}/${dataParts[0]}`;
            
            // Modelo do caminhão se aplicável
            const modelo = carro === 'Caminhão' ? `MODELO: ${form.modelo.value || 'Não informado'}\n` : '';
            
            // Montar resultado
            const resultadoTexto = `NOME: ${nome}
CARRO: ${carro}
${modelo}PLACA: ${placa}
RODÍZIO: ${rodizio}
DESTINO: ${destino}
NOME DO EVENTO: ${nomeEvento}
KM: ${km}
PNEU: ${pneu}
${combustivelOuBateria}
CARTÃO: ${cartao}
HIGIENE: ${higiene}
CARRINHO: ${carrinho}
DATA: ${dataFormatada}`;
            
            // Exibir resultado
            document.getElementById('resultado').textContent = resultadoTexto;
            const resultadoContainer = document.getElementById('resultadoContainer');
            resultadoContainer.style.display = 'block';
            resultadoContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function copiarMensagem() {
            const resultadoTexto = document.getElementById('resultado').textContent;
            const textarea = document.createElement('textarea');
            textarea.value = resultadoTexto;
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                const copyBtn = document.getElementById('copyBtn');
                copyBtn.textContent = '✓ COPIADO!';
                copyBtn.style.backgroundColor = '#087849';
                
                setTimeout(() => {
                    copyBtn.textContent = 'COPIAR MENSAGEM';
                    copyBtn.style.backgroundColor = '';
                }, 2000);
            } catch (err) {
                console.error('Erro ao copiar:', err);
            }
            
            document.body.removeChild(textarea);
        }
    </script>
</body>
</html>
